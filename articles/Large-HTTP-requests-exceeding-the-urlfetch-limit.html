<html><head><meta http-equiv="content-type" content="text/html;charset=utf-8"/><title>Making HTTP requests beyond the 32MB urlfetch limit on Google App Engine | Timm Preetz</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"/><link rel="stylesheet" href="/assets/highlightjs.css"/><link rel="alternate" type="application/rss+xml" title="Timm Preetz&#x27;s blog" href="/rss.xml"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/assets/favicon/site.webmanifest"/></head><body><div id="navWrapper"><nav><a href="/"><img src="/assets/timm_head_ava.jpg" width="30" height="30" class="headerImage"/><div class="name">Timm Preetz</div></a><div><a href="/projects">Projects</a><a href="/archive">Archive</a><a href="/about">About</a></div></nav></div><div id="mainWrapper" class="grt"><div class="contentWrapper"><div><h1>Making HTTP requests beyond the 32MB urlfetch limit on Google App Engine</h1>
<p>Since Google App Engine’s <code>urlfetch</code> service <a href="https://cloud.google.com/appengine/docs/go/urlfetch/#Go_Quotas_and_limits">imposes a 32MB response size limit</a> on each request, one has to roll their own <a href="http://golang.org/pkg/net/http/#Client">http.Client</a> implementation using <code>appengine/socket</code> to make requests exceeding that limit.</p>
<p>Sadly the <code>appengine/socket</code> implementation is <a href="https://code.google.com/p/googleappengine/issues/detail?id=11076">not working with HTTP calls inside the local development server</a>, such that one can not use the same solution and code in development and production.</p>
<p>The two issues made me create the <a href="http://godoc.org/timm.io/fetchall"><code>fetchall</code> package</a>, a simple drop-in replacement for <code>urlfetch</code> that gives you a <code>http.Client</code> implementation that handles arbitrarily large HTTP requests (within the time limits of Google App Engine).</p>
<p>When running in the development server, the implementation will simply use Go’s <code>net</code> package instead of <code>appengine/socket</code> in order for request to work locally as well as in the cloud.</p>
<p>To use this package simply replace <code>urlfetch.Client</code> with <code>fetchall.Client</code> in your Go code.</p>
<p>GitHub: <a href="https://github.com/tp/fetchall">github.com/tp/fetchall</a><br>
GoDoc: <a href="http://godoc.org/timm.io/fetchall">godoc.org/timm.io/fetchall</a></p>
</div></div></div></body></html>